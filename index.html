<!DOCTYPE html>
<html lang="en">
	<head>
		<title>A-Frame - SocketIO</title>
		<meta name="description" content="A-Frame Matta" />
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.dev.js"></script>
		<script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
		<script>
			console.log("connecting");
			var socket = io.connect("http://127.0.0.1:3000");

			socket.on("connected", function (msg) {
				console.log("I'm connectd");
				//COLLECT A-FAME CAMERA POSITION AND ROTATION
				var avatarData = {};
				avatarData["position"] = "0 0 0";//SUBSTITUIR PELO POSITION DA CÂMERA
				avatarData["rotation"] = "0 0 0";//SUBSTITUIR PELO ROTATION DA CÂMERA
				socket.emit(
					"avatarCreated",
					avatarData
				);

                //TESTING SPACE
			});

			socket.on("newAvatarCreated", function (msg) {
				console.log("A wild avatar has appeared");
                var scene = document.getElementById("scene");
				var avatar = document.createElement("a-box");
				avatar.setAttribute("position", msg.position);
                avatar.setAttribute("rotation", msg.rotation);
                avatar.setAttribute("scale", "0.5 1 0.5");
                avatar.setAttribute("color", "red");
                avatar.setAttribute("id", msg.clientId);
                console.log(msg.clientId);
				scene.appendChild(avatar);
			});

			socket.on("otherAvatarTransformUpdate", function (msg) {
				//UPDATE THE OTHER CLIENT'S TRANSFORM AND ROTATION, BASED ON WHAT YOU RECIEVED BY THE SERVER
			});

			socket.on("destroyThisAvatar", function (msg) {
				//Destroy server's provided avatar using msg.client_id to find the referenced <a-box> by it's id
			});
		</script>
	</head>
	<body>
		<!-- ALWAS CHECK IF POSITION AND ROTATION HAS CHANGED -->
		<!-- IF POSITION AND ROTATION HAS CHANGED, SEND AN EMIT WITH NEW POSITION AND ROTATION -->
		<a-scene id="scene"> </a-scene>
	</body>
</html>
